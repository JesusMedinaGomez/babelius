<!DOCTYPE html>
<html lang="es">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Babelius{% endblock %}</title>
    <link rel="icon" type="image/png" href="{% static '/favicon.png' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
            --primary-color: #4D0C19;
            --primary-gradient: linear-gradient(180deg, #4D0C19, #7F1E2F);
            --text-color: #212529;
            --bg-color: #f8f9fa;
        }

        body.dark-mode {
            --bg-color: #121212;
            --text-color: #e5e5e5;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        /* Sidebar fijo (pantallas grandes) */
        .sidebar {
            height: 100vh;
            width: 250px;
            position: fixed;
            top: 0;
            left: 0;
            background: var(--primary-gradient);
            padding-top: 1rem;
        }

        .sidebar .nav-link {
            font-weight: 500;
            padding: 0.75rem 1rem;
            color: #fff;
        }

        .sidebar .navbar-brand {
            color: #fff;
            font-weight: bold;
            font-size: 1.5rem;
        }

        .sidebar .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 0.5rem;
        }

        .sidebar .nav-link.active {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 0.5rem;
        }

        /* Contenido principal */
        .main-content {
            margin-left: 250px;
            padding: 2rem;
        }

        /* Ajuste para m√≥viles */
        @media (max-width: 991px) {
            .sidebar {
                display: none;
            }

            .main-content {
                margin-left: 0;
                padding: 1rem;
            }

            .navbar-toggler {
                display: block;
            }
        }

        /* Dark mode */
        .dark-mode .sidebar {
            background: linear-gradient(180deg, #1A1A1A, #2B2B2B);
        }

        .dark-mode-toggle {
            cursor: pointer;
        }

        .offcanvas {
            background: var(--primary-gradient);
            color: white;
        }

        .offcanvas .nav-link {
            color: white;
        }

        .offcanvas .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
    </style>
</head>

<body id="body">

    <!-- Barra superior (solo visible en m√≥vil) -->
    <nav class="navbar navbar-dark d-lg-none" style="background: var(--primary-gradient);">
        <div class="container-fluid">
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#mobileMenu" aria-controls="mobileMenu">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand ms-2" href="/">BABELIUS</a>
            <span class="dark-mode-toggle text-white">üåô</span>
        </div>
    </nav>

    <!-- Sidebar fijo (pantallas grandes) -->
    <div class="sidebar d-none d-lg-flex flex-column">
        <a class="navbar-brand text-center mb-4" href="/">BABELIUS</a>
        {% if user.is_authenticated %}
        <nav class="nav flex-column">
            <a class="nav-link" href="/babels">Babels</a>
            <a class="nav-link" href="/libros">Libros</a>
            <a class="nav-link" href="/autores">Autores</a>
            <a class="nav-link" href="/generos">G√©neros</a>
            <a class="nav-link" href="/clasificaciones">Clasificaciones</a>
            <a class="nav-link" href="/estantes">Estantes</a>
            <a class="nav-link" href="/cajones">Cajones</a>
            <a class="nav-link" href="/auth/logout">Cerrar sesi√≥n</a>
        </nav>
        {% else %}
        <nav class="nav flex-column">
            <a class="nav-link" href="/auth/login">Iniciar sesi√≥n</a>
            <a class="nav-link" href="/auth/crear_cuenta">Crear cuenta</a>
        </nav>
        {% endif %}
        <div class="mt-auto p-3 text-center">
            <span class="dark-mode-toggle text-white">üåô</span>
        </div>
    </div>

    <!-- Men√∫ lateral m√≥vil -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="mobileMenuLabel">BABELIUS</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            {% if user.is_authenticated %}
            <nav class="nav flex-column">
                <a class="nav-link" href="/babels">Babels</a>
                <a class="nav-link" href="/libros">Libros</a>
                <a class="nav-link" href="/autores">Autores</a>
                <a class="nav-link" href="/generos">G√©neros</a>
                <a class="nav-link" href="/clasificaciones">Clasificaciones</a>
                <a class="nav-link" href="/estantes">Estantes</a>
                <a class="nav-link" href="/cajones">Cajones</a>
                <a class="nav-link" href="/auth/logout">Cerrar sesi√≥n</a>
            </nav>
            {% else %}
            <nav class="nav flex-column">
                <a class="nav-link" href="/auth/login">Iniciar sesi√≥n</a>
                <a class="nav-link" href="/auth/crear_cuenta">Crear cuenta</a>
            </nav>
            {% endif %}
        </div>
    </div>

    <!-- Contenido principal -->
    <div class="main-content">
        {% block content %}
        {% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const toggle = document.querySelectorAll(".dark-mode-toggle");
        const body = document.getElementById("body");

        if (localStorage.getItem("darkMode") === "true") {
            body.classList.add("dark-mode");
            toggle.forEach(t => t.textContent = "‚òÄÔ∏è");
        }

        toggle.forEach(t => {
            t.addEventListener("click", () => {
                body.classList.toggle("dark-mode");
                const isDark = body.classList.contains("dark-mode");
                localStorage.setItem("darkMode", isDark);
                toggle.forEach(tg => tg.textContent = isDark ? "‚òÄÔ∏è" : "üåô");
            });
        });
    </script>
</body>

</html>
